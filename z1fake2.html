<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canlı Emir Defteri</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <style>
  
  body {
    font-family: Arial, sans-serif;
    background-color: black;
    color: white;
    margin: 0;
    padding: 0;
    height: 100vh;
    
 }
  
  /* Fiyat ve miktar arasındaki boşluğu ayarlayan CSS */
 .price-quantity {
    margin-right: 15px; /* Sağdaki öğe ile boşluğu artır */            
 }
    
 .ağol{
    color: white;
 }
  
 .list {
    position: absolute;
    margin-left: 220px;
    margin-top: 40px;
 }
  
 ul {
   list-style-type: none;
   padding-left: 0; /* Varsayılan sol padding'i kaldır */
   font-size: 13px;
   padding-top: 30px;
  }
       
  .container {
     padding: 20px;
  }   
       
  .dropdown {
     position: absoluete;
     display: inline-block;
    z-index: 1000000 !important;
  }
  
  .dropdown h3{
     position: absolute;
     margin-top: 10px;
     margin-left: 10px;     
  }
   
  .dropdown-content {
     display: none;
     position: fixed;
     bottom:0;
     background-color: black;
     width: 360px;
     height: 100%;
     box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
     z-index: 10000;
     border-radius: 10px;
     margin: -50px 0px;
     z-index: 100000;    
     overflow: visible;
     overflow-y: auto; /* İçerik taşarsa kaydırılabilir olsun */            
     max-height: 520px;
     overscroll-behavior: contain; /* Scroll chaining'i engelle */
  }
  
    
  .dropdown-content p{     
     color: white; 
     font-size: 15px;
     font-weight: bold;    
     margin-left: 40px;
     margin-top: 80px;     
  }
    
  .show {
     display: block;
  }
    
   #ethh{
     position: absolute;
     margin-top: 17px;
     width: 200px;
     height: 30px;     
   }
  
   #xrpp{
     position: absolute;
     margin-top: 70px;
     width: 200px;
     height: 30px;
   }
  
   #bnbb{
     position: absolute;
     margin-top: 120px;
     width: 200px;
     height: 30px;
   }
  
   #soll{
     position: absolute;
     margin-top: 170px;
     width: 200px;
     height: 30px;
   }
  
   #degee{
     position: absolute;
     margin-top: 220px;
     width: 200px;
     height: 30px;
   }
   
    
        /* Başlangıçta "Al" butonu aktif olsun */
  #alButton {
    position: absolute;
    background-color: #32CD32;
    color: white;
    margin-top: 70px;
    left: 10px;
    width: 90px; 
    height: 30px;
    border: none;
    border-radius: 30px;
    border: 1px solid #777;
  }
  
  
  #satButton {
    position: absolute;
    background-color: green;
    color: white;
    margin-top: 70px;
    left: 110px;
    width: 90px; 
    height: 30px;
    border: none;
    border-radius: 30px;
    border: 1px solid #777;
  }
  
  #altButton {
    position: absolute;
    background-color: #32CD32;
    color: white;
    margin-top: 470px;
    left: 10px;
    width: 190px; 
    height: 40px;
    border: none;
    border-radius: 30px;
    border: 1px solid #777;
  }
    
 .spann{
    position: absolute;
    margin-top: -140px;
    margin-left: 200px;
  }
  
  .yazı1 {
    position: absolute;
    z-index: 10;
    margin-left: 75px;
    font-size: 13px;
    transform: translateY(130px);
  }
  
  .yazı2 {
    position: absolute;
  }
  
  
  .form-group {
      position: absolute;
      margin: 70px auto;
      width: 250px;
    }
  
    .label1 {
      position: absolute;
      color: white;
      font-family: Arial, sans-serif;
      top: 145px;
      left: 60px;
      transform: translateY(-50%);
      color: #888;
      font-size: 16px;
      transition: all 0.3s ease;
      pointer-events: none;         
    }
  
    .label2 {
      position: absolute;
      color: white;
      font-family: Arial, sans-serif;
      top: 260px;
      left: 55px;
      transform: translateY(-50%);
      color: #888;
      font-size: 16px;
      transition: all 0.3s ease;
      pointer-events: none;         
    }
  
    .form-group input:focus + .label1,
    .form-group input:not(:placeholder-shown) + .label1 {
      top: 130px;
      left: 70px;
      color: #bbb;
      font-size: 12px;
    }
  
    .form-group input:focus + .label2,
    .form-group input:not(:placeholder-shown) + .label2 {
      top: 250px;
      left: 70px;
      color: #bbb;
      font-size: 12px;
    }
  
    .alqı {
      position: absolute;
      width: 190px;
      height: 45px;
      text-align: center;
      font-size: 16px;
      color: white;
      outline: none;
      margin-left: 10px;
      margin-top: 120px;
      background-color: #232429;
      border: 1px solid #232429;
      border-radius: 5px;
      box-sizing: border-box;
      padding: 30px 10px 10px 10px;       
    }
  
    .alqı2 {
      position: absolute;
      width: 190px;
      height: 45px;
      text-align: center;
      font-size: 16px;
      color: white;
      outline: none;
      margin-left: 10px;
      margin-top: 240px;
      background-color: #232429;
      border: 1px solid #232429;
      border-radius: 5px;
      box-sizing: border-box;
      padding: 30px 10px 10px 10px;       
    }
  
    #current-price3{
       position: absolute;
       margin-left: 250px;
       color: gray;
       margin-top: 280px;
       font-size: 10px;
     }
  
    #current-price2{
       position: absolute;
       margin-left: 240px;
       margin-top: 260px;
       color: green;
     }
  
    #current-price1{
       position: absolute;
       margin-left: 65px;
       margin-top: 150px;
       z-index: 1000;
     }
  
  
  .limit{
    position: absolute;
    background-color: #232429;
    color: white;
    margin-top: 110px;
    left: 10px;
    width: 190px; 
    height: 25px;
    border: none;
    border-radius: 10px;
    border: 0.5px solid #232429;
  }
  
  .fiyat{
    position: absolute;
    background-color: #232429;
    color: gray;
    margin-top: 130px;
    left: 10px;
    width: 190px; 
    height: 40px;
    border: none;
    border-radius: 10px;
    border: 0.5px solid #232429;
    font-size: 12px;
    z-index: 1;
  }
  
 
  .range-container {
      position: absolute;
      width: 50%;
      margin-left: 10px; /* Soldan 10px boşluk */
      margin-top: 260px;
    }

    .range-output {
      position: absolute;
      top: -20px;
      left: 10px; /* Başlangıç pozisyonu */
      transform: translateX(-50%);
      font-size: 16px;
      font-weight: bold;
      background: #121212;
      padding: 0px 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      white-space: nowrap;
      color: white;
    }

    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 1px;
      background: linear-gradient(to right, white 100%, black 0%);
      border-radius: 5px;
      outline: none;
      transition: background 0.3s ease;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 13px;
      height: 13px;
      background: #3498db;
      transform: rotate(45deg);
      border: none;
      cursor: pointer;
      border-radius: 50%;
    }

    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: #3498db;
      transform: rotate(45deg);
      border: none;
      cursor: pointer;
  }
        
  .koneç-menu{
    position: absolute;
    margin-top: 370px;
  }
   
  .van{
    color: gray;    
    margin-left: 10px;
    display: flex;
    font-size: 12px;
    padding: 3px 0px;
  }
  
  .tu1{    
    color: white;    
    margin-left: 90px;
  }
  
  .tu2{
    position: absolute;
    color: white;    
    margin-left: 140px;
  }
  
  .tu3{
    position: absolute;
    color: white;    
    margin-left: 155px;
  }
  
  
  .sağ-üst1{
    color: gray;
    position: absolute;
    display: flex;
    margin-left: 220px;    
    margin-top: 50px;
    font-size: 12px;
  }
  
  .sağ-üst2{
    display: flex;
    position: absolute;
    margin-top: 15px;
  }
    
  .sağ-üst11{
    color: gray;
    position: absolute;
    display: flex;
    margin-left: 310px;    
    margin-top: 50px;
    font-size: 12px;
  }
  
  .sağ-üst22{
    display: flex;
    position: absolute;
    margin-top: 15px;
  }
  
  .a0_01{
    position: absolute;
    margin: 470px 220px;
    color: #121212;
    width: 90px;
    height: 8px;
    background-color: gray;
    text-align: center;
    border-radius: 5px;
    font-size: 12px;
    padding-top: 5px;
    padding-bottom: 9px;
  }
  
  #currency-options {
    
  }
  
  
  /* Kripto para container */
        .crypto-container {
            width: 50%;
            margin: 20px auto;
            margin-top: -45px;
            position: absolute;
            margin-left: 200px;
            user-select: none; /* Metin seçimini engeller */
            -webkit-user-select: none; /* Safari için */
            -ms-user-select: none; /* Eski Internet Explorer için */
            cursor: default; /* İşaretçiyi normal moda çevirir */       
       
        }

        .crypto-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 7px 15px;
            border: 1px solid black;
            border-radius: 5px;
            margin-bottom: 10px;
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            cursor: pointer;
            text-align: center;            
            user-select: none; /* Metin seçimini engeller */
            -webkit-user-select: none; /* Safari için */
            -ms-user-select: none; /* Eski Internet Explorer için */
            cursor: default; /* İşaretçiyi normal moda çevirir */                   
        }
          
        .crypto-row:hover {
            outline: none;
        }

        .crypto-name {
            font-weight: bold;
            font-size: 15px;
            margin-left: 20px;            
        }

        .crypto-price{
            margin-right: -100px;
            margin-top: -10px;            
        }

        .change-box {
            display: flex;
            align-items: flex-end;
            justify-content: end;
            border-radius: 5px;
            background-color: black;
            color: white;
            font-weight: bold;
            font-size: 12px;
            margin-right: 15px;
            margin-bottom: -25px;
        }

        .crypto-change {
            color: white;
            font-size: 12px;
        }

        .coin-image {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            margin-left: -210px;
        }

        /* Ek bilgi kutusu */
        .crypto-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
           
        }
  
        .taz-container {
            display: flex;
            border-bottom: 2px solid #ccc;
            margin-top: 530px;
        }
        .taz {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid #ccc;
            border-bottom: none;
            background-color: #f1f1f1;
            margin-right: 5px;
            color: black;
        }
        .taz.active {
            background-color: white;
            font-weight: bold;
        }
        .taz-content {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
        }
        .taz-content.active {
            display: block;
        }
  
  .opşi {
    margin-top: 0px;
    border-top: 1px solid black;
    position: ;
    transform: translateY(40px);
    width: 360px;
    margin-left: px;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    height: 600px;
    background-color: black;
    box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;
  }
  
  .tar-container {
    display: flex;
    border-bottom: 1px solid gray;
    background-color: black;
    position: fixed;
    width: 360px;
    height: 50px;
    z-index: 100;
  }
        .tar {
            padding: 15px 20px;         
            border-bottom: none;
            background-color: black;
            margin-right: 5px;
            color: gray;
            outline: none;
        }
                
        .tar.active {
            background-color: black;
            font-weight: bold;
            color: white;
        }
        .tar-content {
            display: none;
            
        }
        .tar-content.active {
            display: block;
        }
  
  
        ul li {
            margin-bottom: 2px; /* Her bir fiyat arasında 10px boşluk */
        }  
  
   /* Alt Menü */
  .bottom-bar{
    position: fixed;
    bottom: 0;
    width: 100%;
    height: 50px;
    background: black;
    left: 0;
    display: flex;
    align-items: center;
    justify-content: space-around;
  }

  .bottom-item{
    width: 40px; 
    height: 40px;
    border: px solid white;
    display:flex;
    justify-content: center;
  }
  
  .iç-kare{
    width: 30px; 
    height: 30px;
    border: px solid yellow;
    display:flex;
    justify-content: center;
    align-items: center;
  }
  
  
    </style>
</head>
<body>
  
  <div class="tar-container">
        <div class="tar active" onclick="window.location.href='z1fake2.html'">Spot</div>
        <div class="tar" onclick="window.location.href='vadeli1.html'">Vadeli</div>
        <div class="tar" onclick="window.location.href='p2p-ticarət-test.html'">P2P</div>
  </div>
  
  <div id="tar1" class="tar-content active">
      
    
  <div class="opşi">
           <div class="dropdown">
            <h3 id="currency-selector">BTC/USDT ▼</h3>                                   
           </div>
    
    
  <div id="yazı1" style="color:gray;" class="yazı1">Fiyat(BTC)</div>    
  <button class="limit">Limit</button>  
  <div class="fiyat"></div>
  
  
  
<div class="form-group">
    <input class="alqı" id="crypto-input" type="number" step="0.00000001" placeholder=" ">
    <div id="yazı2" style="color:gray;" class="label1">Miktar(BTC)</div>   
</div>  
  
  <div class="range-container">
    <div class="range-output" id="rangeValue"></div>
    <input type="range" id="customRange" min="0" max="100" value="0">
  </div>  
  
<div class="form-group">
    <input class="alqı2" id="usd-input" type="number" step="0.01" placeholder=" ">
    <label class="label2" for="usd-input">USD Karşılığı</label>   
</div>
  
  
  
  
  <div class="koneç-menu">
    <span class="van">Mövcud<span class="tu1">0.00 USDT</span></span>
    <span class="van">Maksimum Alış<div id="yazı02" class="tu2">0.00 BTC</div></span>
    <span class="van">Təxmini Komissiya<div id="yazı01" class="tu3">BTC</div>
</span>    
  </div>
    
    
    <div class="list">
        <ul id="asks"></ul>
        <ul id="bids"></ul>
    </div>
    

    
  <div id="current-price1">$0.00</div>
  <div id="current-price2">$0.00</div>
  <div id="current-price3">$0.00</div>

    
    
<button id="alButton" onclick="toggleButtons('al')">Al</button>
<button id="satButton" onclick="toggleButtons('sat')">Sat</button>

    <button id="altButton">Al</button>

  <span class="sağ-üst1">Fiyat<span class="sağ-üst2">(USDT)</span></span>
  <span class="sağ-üst11">Miktar<div id="yazı3" style="color:gray;" class="sağ-üst22">Fiyat(BTC)</div>
    </span>
  

  <div class="a0_01">0.01</div>
  
  
    <div class="taz-container">
        <div class="taz active" onclick="openTaz(event, 'taz1')">Sekme 1</div>
        <div class="taz" onclick="openTaz(event, 'taz2')">Sekme 2</div>
    </div>
  
  
    <div id="taz1" class="taz-content active">
        <h2>Sekme 1 İçeriği</h2>
        <p>Buraya sekme 1 içeriği gelecek.</p>
    </div>
    <div id="taz2" class="taz-content">
        <h2>Sekme 2 İçeriği</h2>
        <p>Buraya sekme 2 içeriği gelecek.</p>
    </div>
  
  </div>
    
  </div>
  
  
  <div class="bottom-bar">    
      <div class="bottom-item" onclick="window.location.href='Boş(3).html'">
        <div class="iç-kare"><span class="material-icons" style="color: gray; font-size: 25px;">home</span></div>
        <p style="position: absolute; color: gray; font-size: 10px; margin-top: 30px;">Ana sayfa</p>
      </div>
      <div class="bottom-item" onclick="window.location.href='piyasalar.html'">
        <div class="iç-kare"><span class="material-icons" style="color: gray; font-size: 25px;">leaderboard</span></div>
        <p style="position: absolute; color: gray; font-size: 10px; margin-top: 30px;">Piyasalar</p>      
      </div>
      <div class="bottom-item" onclick="window.location.href='z1fake2.html'">
        <div class="iç-kare"><span class="material-icons" style="color: white; font-size: 25px; transform: rotate(90deg);">sync_alt</span></div>
        <p style="position: absolute; color: white; font-size: 10px; margin-top: 30px;">Al-Sat</p>      
      </div>
      <div class="bottom-item" onclick="window.location.href='vadeli1.html'">
        <div class="iç-kare"><span class="material-icons" style="color: gray; font-size: 25px;">trending_up</span></div>
        <p style="position: absolute; color: gray; font-size: 10px; margin-top: 30px;">Vadeli</p>      
      </div>
      <div class="bottom-item" onclick="window.location.href='yana-kayma.html'">
        <div class="iç-kare"><span class="material-icons" style="color: gray; font-size: 25px;">account_balance_wallet</span></div>
        <p style="position: absolute; color: gray; font-size: 10px; margin-top: 30px;">cüzdan</p>      
      </div>  
  </div>
  
  
  <div class="dropdown">
             <div id="currency-options" class="dropdown-content">   
                    <p id="btcc" onclick="toggleButtons1('BTC')">BTC</p>
                    <p id="ethh" class="coinn" onclick="toggleButtons1('ETH')">ETH</p>
                    <p id="xrpp" class="coinn" onclick="toggleButtons1('XRP')">XRP</p>
                    <p id="bnbb" class="coinn" onclick="toggleButtons1('DOGE')">BNB</p>
                    <p id="soll" class="coinn" onclick="toggleButtons1('SOL')">SOL</p>
                    <p id="degee" class="coinn" onclick="toggleButtons1('DOGE')">DOGE</p>
                   
    <!-- Kripto Para Listesi -->                 
    <div class="crypto-container" id="crypto-container">
        <!-- Kripto paralar burada dinamik olarak eklenecek -->
    </div>
                  
                </div>                                                 
            </div>  
  
    
    <script>
  
  function openTaz(event, tazId) {
            // Tüm sekmeleri gizle
            const tazs = document.querySelectorAll('.taz-content');
            tazs.forEach(taz => taz.classList.remove('active'));

            // Tüm sekme başlıklarından aktif sınıfını kaldır
            const tazButtons = document.querySelectorAll('.taz');
            tazButtons.forEach(button => button.classList.remove('active'));

            // Tıklanan sekmeyi ve ilgili içeriği aktif yap
            document.getElementById(tazId).classList.add('active');
            event.target.classList.add('active');
        }
  
  
        const dropdownContent = document.getElementById('currency-options');
        const dropdownTrigger = document.getElementById('currency-selector');

        function toggleDropdown() {
            const isHidden = dropdownContent.classList.contains('hidden');
            if (isHidden) {
                dropdownContent.classList.remove('hidden');
          } else {
                dropdownContent.classList.add('hidden');
            }
        }

        // Sayfa kaydırıldığında kapanması
        document.addEventListener('scroll', () => {
            dropdownContent.classList.remove('show');
        });
  
        function closeDropdown() {
            dropdownContent.classList.add('hidden');
        }

        document.addEventListener('click', () => {
            dropdownContent.classList.add('hidden');
        });

        dropdownContent.addEventListener('click', (event) => {
            const clickedElement = event.target;
            if (clickedElement.tagName !== 'P') {
                event.stopPropagation();
            }
        });

        dropdownTrigger.addEventListener('click', (event) => {
            event.stopPropagation();
        });
  
  
  
    
window.onload = function() {
    // Sayfa yüklendiğinde 'Al' butonunu aktif yap
    document.getElementById("alButton").style.backgroundColor = "#0bba75";
    document.getElementById("satButton").style.backgroundColor = "#0a0f1c";
    document.getElementById("altButton").style.backgroundColor = "#0bba75";    
    document.getElementById("altButton").innerText = "Al";
    document.getElementById("yazı1").innerText = "Fiyat(BTC)";    
    document.getElementById("yazı2").innerText = "Miktar(BTC)";    
    document.getElementById("yazı3").innerText = "(BTC)";    
    document.getElementById("yazı01").innerText = "0 BTC";    
    document.getElementById("yazı02").innerText = "---BTC";    
};

function toggleButtons(action) {
    if (action === 'al') {
        document.getElementById("alButton").style.backgroundColor = "#0bba75";
        document.getElementById("satButton").style.backgroundColor = "#0a0f1c";
        document.getElementById("altButton").innerText = "Al";
        document.getElementById("altButton").style.backgroundColor = "#0bba75";
    } else if (action === 'sat') {
        document.getElementById("alButton").style.backgroundColor = "#0a0f1c";
        document.getElementById("satButton").style.backgroundColor = "#e84960";
        document.getElementById("altButton").innerText = "Sat";
        document.getElementById("altButton").style.backgroundColor = "#e84960";
    }
}
    
 
    
function toggleButtons1(action) {
    if (action === 'BTC') {
        document.getElementById("yazı1").innerText = "Fiyat(BTC)";
        document.getElementById("yazı2").innerText = "Miktar(BTC)";      
        document.getElementById("yazı3").innerText = "(BTC)";      
        document.getElementById("yazı01").innerText = "0.00 BTC";      
        document.getElementById("yazı02").innerText = "--BTC";      
    }
    if (action === 'ETH') {
        document.getElementById("yazı1").innerText = "Fiyat(ETH)";       
        document.getElementById("yazı2").innerText = "Miktar(ETH)";       
        document.getElementById("yazı3").innerText = "(ETH)";             
        document.getElementById("yazı01").innerText = "0.00 ETH";       
        document.getElementById("yazı02").innerText = "--ETH";                   
    } 
    if (action === 'DOGE') {
        document.getElementById("yazı1").innerText = "Fiyat(DOGE)";               
        document.getElementById("yazı2").innerText = "Miktar(DOGE)";                     
        document.getElementById("yazı3").innerText = "(DOGE)";                           
        document.getElementById("yazı01").innerText = "0.00 DOGE";                     
        document.getElementById("yazı02").innerText = "--DOGE";                           
    }
  }

    
  // Fiyatı coin türüne göre formatlamak için fonksiyon
function formatPriceByCoin(price, symbol) {
    const num = parseFloat(price);

    // Eğer fiyat büyükse (örneğin BTC, ETH), standart formatlama uygula
    if (symbol === 'BTC' || symbol === 'ETH') {
        return num.toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    // Eğer fiyat küçükse (örneğin DOGE, PEPE), daha fazla basamak göster
    if (symbol === 'DOGE' || symbol === 'PEPE') {
        if (num >= 1) {
            return num.toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        } else {
            return num.toLocaleString("en-US", { minimumFractionDigits: 4, maximumFractionDigits: 5 });
        }
    }

    // Büyük rakamları (örneğin milyonlar) kısa formatta göstermek için
    if (num >= 1e6) {
        return `${(num / 1e6).toFixed(2)}M`; // Milyon
    } else if (num >= 1e3) {
        return `${(num / 1e3).toFixed(2)}K`; // Bin
    }

    // Varsayılan format
    return num.toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
}
  
  
  
  
    
    function formatQuantity(quantity) {
    const num = parseFloat(quantity);

    // Eğer miktar büyükse kısa format uygula (örneğin 1k, 1M)
    if (num >= 1e6) {
        return `${(num / 1e6).toFixed(2)}M`; // Milyon
    } else if (num >= 1e3) {
        return `${(num / 1e3).toFixed(2)}K`; // Bin
    }

    // Küçük miktarlar için hassasiyet artır (örneğin 0.00012 gibi)
    return num.toLocaleString("en-US", { minimumFractionDigits: 4, maximumFractionDigits: 8 });
}
        
  
  
  
    // Fiyatı formatlamak için fonksiyon
    function formatPrice(price) {
        const num = parseFloat(price);
        if (num > 100000) {
            // İlk 3 rakamdan sonra virgül ekle
            return num.toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        } else {
            // 2 rakamdan sonra virgül ekle
            return num.toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }
    }

    let currentSymbol = "btcusdt"; // Varsayılan olarak BTC/USDT
    let socket, socketPrice1;

// Bitcoin veya diğer kripto miktarı için inputlar
const cryptoInput = document.getElementById("crypto-input"); // Kripto miktarı girilen input
const usdInput = document.getElementById("usd-input"); // USD miktarı girilen input
let currentPrice = 0; // Anlık fiyat burada saklanacak

    
    function connectWebSockets() {
        // Önceki bağlantılar varsa kapat
        if (socket) socket.close();
        if (socketPrice1) socketPrice1.close();

        // Yeni bağlantılar oluştur
        socket = new WebSocket(`wss://stream.binance.com:9443/ws/${currentSymbol}@depth10@100ms`);
        socketPrice1 = new WebSocket(`wss://stream.binance.com:9443/ws/${currentSymbol}@trade`);

        const asksList = document.querySelector("#asks");
        const bidsList = document.querySelector("#bids");
        const priceElement1 = document.querySelector("#current-price1");
        const priceElement2 = document.querySelector("#current-price2");
        const priceElement3 = document.querySelector("#current-price3");

        socket.onopen = () => {
            console.log("Emir Defteri WebSocket Bağlantısı Başarıyla Açıldı.");
        };

        socketPrice1.onopen = () => {
            console.log("Fiyat WebSocket Bağlantısı Başarıyla Açıldı.");
        };

        socketPrice1.onmessage = (event) => {
    const data = JSON.parse(event.data);
    currentPrice = parseFloat(data.p); // Anlık fiyatı al
    const symbol = currentSymbol.split('usdt')[0].toUpperCase(); // Coin sembolünü al (BTC, ETH, DOGE, PEPE)

    // Fiyatları formatla
    const formattedPrice1 = formatPriceByCoin(currentPrice, symbol);
    const formattedPrice2 = formatPriceByCoin(currentPrice, symbol);
    const formattedPrice3 = formatPriceByCoin(currentPrice, symbol);

    // Fiyatları güncelle
    document.querySelector("#current-price1").textContent = `$${formattedPrice1}`;
    document.querySelector("#current-price2").textContent = `$${formattedPrice2}`;
    document.querySelector("#current-price3").textContent = `≈${formattedPrice3}$`;
};

  
      
        socket.onmessage = (event) => {
    const data = JSON.parse(event.data);
    asksList.innerHTML = ""; // Satış emirlerini temizle
    bidsList.innerHTML = ""; // Alım emirlerini temizle

    const symbol = currentSymbol.split('usdt')[0].toUpperCase(); // Coin sembolünü al (BTC, ETH, DOGE, PEPE)

    // Satış emirlerini listele
    data.asks.forEach(([price, quantity]) => {
        const li = document.createElement("li");
        li.innerHTML = `<span class="price-quantity">${formatPriceByCoin(price, symbol)}</span>
                        <span class="ağol">${formatQuantity(quantity)}</span>`;
        li.style.color = "#FF3131";
        asksList.appendChild(li);
    });

    // Alım emirlerini listele
    data.bids.forEach(([price, quantity]) => {
        const li = document.createElement("li");
        li.innerHTML = `<span class="price-quantity">${formatPriceByCoin(price, symbol)}</span>
                        <span class="ağol">${formatQuantity(quantity)}</span>`;
        li.style.color = "#0BDA51";
        bidsList.appendChild(li);
    });
};
      
        

        socket.onerror = (error) => {
            console.error("Emir Defteri WebSocket Hatası:", error);
        };

        socketPrice1.onerror = (error) => {
            console.error("Fiyat WebSocket Hatası:", error);
        };

        socket.onclose = () => {
            console.log("Emir Defteri WebSocket Bağlantısı Kapandı.");
        };

        socketPrice1.onclose = () => {
            console.log("Fiyat WebSocket Bağlantısı Kapandı.");
        };
    }
  
  
  
  
    
  
  const range = document.getElementById("customRange");
    const rangeValue = document.getElementById("rangeValue");

    range.addEventListener("input", () => {
      const percent = (range.value - range.min) / (range.max - range.min) * 100;

      // Kaydırılan kısmın rengini beyaz, geri kalanını gri yap
      range.style.background = `linear-gradient(to right, green 0%, green ${percent}%, white 0% ${percent}%, white 100%)`;

      // Yüzde yazısını güncelle
      rangeValue.textContent = `${range.value}%`;

      // Yüzde yazısının tam hizalanması
      const rangeWidth = range.offsetWidth; // Kaydırıcının genişliği
      const thumbWidth = 20; // Kaydırıcı tutacağının genişliği
      const position = (percent / 100) * (rangeWidth - thumbWidth) + thumbWidth / 2;
      rangeValue.style.left = `${position}px`;
    });
    
    
    
// Anlık fiyat değiştiğinde inputların hesaplamalarını güncelle
function updateInputs() {

// Kripto para miktarı değiştiğinde dolar hesapla
    cryptoInput.addEventListener("input", () => {
        const cryptoValue = parseFloat(cryptoInput.value) || 0; // Kripto miktarını al
        const usdValue = (cryptoValue * currentPrice).toFixed(2); // USD değerini hesapla
        usdInput.value = usdValue; // USD inputunu güncelle
    });

    // Dolar miktarı değiştiğinde kripto para miktarını hesapla
    usdInput.addEventListener("input", () => {
        const usdValue = parseFloat(usdInput.value) || 0; // USD değerini al
        const cryptoValue = (usdValue / currentPrice).toFixed(8); // Kripto değerini hesapla
        cryptoInput.value = cryptoValue; // Kripto inputunu güncelle
    });
}  
    
        

    // İlk bağlantıları başlat
    connectWebSockets();

    document.getElementById('currency-selector').addEventListener('click', function() {
        document.getElementById('currency-options').classList.toggle('show');
    });
  
  
    // Kripto ve USD inputlarını sıfırlayan fonksiyon
    function resetInputs() {
        cryptoInput.value = ""; // Kripto miktarı alanını sıfırla
        usdInput.value = "";    // USD miktarı alanını sıfırla
    } 
  
    
    document.querySelectorAll('#currency-options p').forEach(function(option) {
      option.addEventListener('click', function() {
            const selectedCurrency = this.innerText.toLowerCase(); // BTC veya ETH al
            currentSymbol = `${selectedCurrency}usdt`; // Yeni sembolü ayarla (örn: btcusdt, ethusdt)
            
            // Yeni WebSocket bağlantılarını başlat
            connectWebSockets();
          
            // Inputları sıfırla
            resetInputs();


            // Dropdown'u gizle ve seçilen para birimini göster
            document.getElementById('currency-selector').innerHTML = `${selectedCurrency.toUpperCase()}/USDT ▼`;
            document.getElementById('currency-options').classList.remove('show');
        });
    });

    // Sayfa tıklandığında dropdown'u kapatmak için
    window.onclick = function(event) {
        if (!event.target.matches('#currency-selector')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            for (var i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                }
            }
        }
    }
    
    
// İlk bağlantıları başlat ve inputları güncelle
connectWebSockets();
updateInputs();
  
  
  
  
  
   // Kripto paraların bilgilerini tutan dizi
        let cryptoData = [
            { id: 'bitcoin', symbol: 'BTCUSDT',  image: 'Pictures/Browser/btc.png', link: '', decimals: 0 },
            { id: 'ethereum', symbol: 'ETHUSDT', image: 'Pictures/Browser/eth.png', link: '',  decimals: 0 },
            { id: 'solana', symbol: 'SOLUSDT', image: 'Pictures/Browser/solana.png', link: '', decimals: 1 },
            { id: 'dogecoin', symbol: 'DOGEUSDT', image: 'Pictures/Browser/doge.jpg', link: '', decimals: 3 },
            { id: 'ripple', symbol: 'XRPUSDT', image: 'Pictures/Browser/xrp.png', link: '#', decimals: 2 },
            { id: 'tron', symbol: 'TRXUSDT', image: 'Pictures/Browser/trx.png', link: '#', decimals: 3 },
            { id: 'floki', symbol: 'FLOKIUSDT', image: 'Pictures/Browser/floki.png', link: '#', decimals: 6 },
            { id: 'litecoin', symbol: 'LTCUSDT', image: 'Pictures/Browser/ltc.png', link: '#', decimals: 1 },
            { id: 'cosmos', symbol: 'ATOMUSDT', image: 'Pictures/Browser/atom.png', link: 'bitcoinbilgi.html', decimals: 2 },
            { id: 'bonk', symbol: 'BONKUSDT', image: 'Pictures/Browser/bonk.png', link: 'bitcoinbilgi.html', decimals: 6 },
            { id: 'polkadot', symbol: 'DOTUSDT', image: 'Pictures/Browser/dot.jpg', link: 'bitcoinbilgi.html', decimals: 1 },
            { id: 'first-digital-usd', symbol: 'FDUSDUSDT', image: 'Pictures/Browser/usdt.png', link: 'bitcoinbilgi.html', decimals: 1 },
            { id: 'shiba-inu', symbol: 'SHIBUSDT', image: 'Pictures/Browser/shib.png', link: 'bitcoinbilgi.html', decimals: 7 },
            { id: 'binancecoin', symbol: 'BNBUSDT', image: 'Pictures/Browser/bnb.png', link: 'bitcoinbilgi.html', decimals: 1 },    
            { id: 'stellar', symbol: 'XLMUSDT', image: 'Pictures/Browser/xlm.png', link: 'bitcoinbilgi.html', decimals: 3 },
      ]

        // CoinGecko API'den ek verileri çekme
        async function fetchCoinGeckoData() {
            const ids = cryptoData.map(coin => coin.id).join(',');
            const url = `https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${ids}`;
            const response = await fetch(url);
            const data = await response.json();

            // Gelen verileri cryptoData dizisine ekle
            cryptoData.forEach(coin => {
                const coinData = data.find(item => item.id === coin.id);
                if (coinData) {
                    coin.market_cap = coinData.market_cap;
                    coin.price_change_percentage_24h = coinData.price_change_percentage_24h;
                }
            });

            // İlk olarak Market Cap sırasına göre sıralayalım
            sortAndDisplay('marketcap');

            // Binance WebSocket bağlantısını başlat
            startWebSocket();
        }

        // Kripto paraları sıralama ve gösterme
        function sortAndDisplay(criteria) {
            switch(criteria) {
                case 'marketcap':
                    cryptoData.sort((a, b) => b.market_cap - a.market_cap);
                    break;
                case 'increase':
                    cryptoData.sort((a, b) => b.price_change_percentage_24h - a.price_change_percentage_24h);
                    break;
                case 'decrease':
                    cryptoData.sort((a, b) => a.price_change_percentage_24h - b.price_change_percentage_24h);
                    break;
                case 'name':
                    cryptoData.sort((a, b) => a.name.localeCompare(b.name));
                    break;
            }

            // Aktif sekmeyi güncelle
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.sort === criteria) {
                    tab.classList.add('active');
                }
            });

            // Kripto paraları ekrana yazdır
            displayCryptos();
        }

        // Kripto paraları ekrana yazdırma
        function displayCryptos() {
            const container = document.getElementById('crypto-container');
            container.innerHTML = '';

            cryptoData.forEach(coin => {
                const row = document.createElement('div');
                row.className = 'crypto-row';
                
                // Coin resmi
                const img = document.createElement('img');
                img.src = coin.image;
                img.alt = 'coin image';
                img.className = 'coin-image';

                // Coin ismi
                const nameSpan = document.createElement('span');
                nameSpan.className = 'crypto-name';
                nameSpan.textContent = coin.name;

                // Fiyat
                const priceSpan = document.createElement('span');
                priceSpan.className = 'crypto-price';
                priceSpan.id = `${coin.id}-price`;

                // Değişim yüzdesi
                const changeBox = document.createElement('div');
                changeBox.className = 'change-box';
                changeBox.id = `${coin.id}-change-box`;

                const changeSpan = document.createElement('span');
                changeSpan.className = 'crypto-change';
                changeSpan.id = `${coin.id}-change`;
                changeBox.appendChild(changeSpan);
                changeBox.appendChild(document.createTextNode('%'));

                // Bilgi kutusu
                const infoDiv = document.createElement('div');
                infoDiv.className = 'crypto-info';
                infoDiv.appendChild(nameSpan);
                infoDiv.appendChild(priceSpan);

                // Satıra elemanları ekle
                row.appendChild(img);
                row.appendChild(infoDiv);
                row.appendChild(changeBox);

                container.appendChild(row);
            });
        }

        // Sekme tıklama olayları
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                sortAndDisplay(tab.dataset.sort);
            });
        });

        // Binance WebSocket bağlantısı
        function startWebSocket() {
            const streams = cryptoData.map(coin => coin.symbol.toLowerCase() + '@ticker').join('/');
            const socket = new WebSocket(`wss://stream.binance.com:9443/stream?streams=${streams}`);

            // Fiyat ve değişim oranını sürekli güncelle
            socket.onmessage = function(event) {
                const message = JSON.parse(event.data);
                const data = message.data;
                const symbol = data.s;  // Sembol bilgisi

                const coin = cryptoData.find(coin => coin.symbol === symbol);
                if (coin) {
                    const decimals = coin.decimals || 0; // Eğer ondalık basamak belirtilmemişse varsayılan olarak 2 al
                    const price = parseFloat(data.c).toFixed(decimals); // Güncel fiyat
                    const change = parseFloat(data.P).toFixed(2); // Değişim yüzdesi

                    const priceElement = document.getElementById(`${coin.id}-price`);
                    const changeElement = document.getElementById(`${coin.id}-change`);
                    const changeBox = document.getElementById(`${coin.id}-change-box`);

                    if (priceElement) priceElement.textContent = `$${price}`;
                    if (changeElement) changeElement.textContent = change;
                    if (changeBox) changeBox.style.color = change >= 0 ? 'green' : 'red';
                    if (changeElement) changeElement.style.color = change >= 0 ? 'green' : 'red';                    
                  
                }
            };

            // Bağlantı hatası durumunda mesaj göster
            socket.onerror = function(error) {
                console.error("WebSocket bağlantı hatası:", error);
                alert("Bağlantı hatası oluştu.");
            };

            // Bağlantı kesildiğinde bilgi ver
            socket.onclose = function() {
                console.log("WebSocket bağlantısı kapatıldı.");
                alert("Bağlantı kapandı.");
            };
        }

        // Sayfa yüklendiğinde verileri çek ve göster
        fetchCoinGeckoData();
    
    </script>
</body>
</html>